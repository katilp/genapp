# Simple Node.js site generated with express-generator

## Generating the template

This example was generated following the instructions in https://expressjs.com/en/starter/installing.html

```
mkdir genapp
cd genapp

npx express-generator
npx: installed 10 in 4.18s

  warning: the default view engine will not be jade in future releases
  warning: use `--view=jade' or `--help' for additional options


   create : public/
   create : public/javascripts/
   create : public/images/
   create : public/stylesheets/
   create : public/stylesheets/style.css
   create : routes/
   create : routes/index.js
   create : routes/users.js
   create : views/
   create : views/error.jade
   create : views/index.jade
   create : views/layout.jade
   create : app.js
   create : package.json
   create : bin/
   create : bin/www

   install dependencies:
     $ npm install

   run the app:
     $ DEBUG=genapp:* npm start

npm install
```

Run the app with `npm start` and see the welcome page in http://localhost:3000/

## Default file structure

The default file structure generated by express has
- executable `www` in `bin`
- application in `app.js`
- routers for different actions in `routes/index.js`
- HTML templates in jade in `views/index.jade`
- static files in `public`

A good explanation of the structure in https://www.sitepoint.com/create-new-express-js-apps-with-express-generator/

## Some modifications as an exercise

In this example, the following files were modified
- stylesheet updates in `public/stylesheet/style.css`
- html page updates in `views/layout.jade` for the elements that normally appear all pages (only one page in this example)
- html page updates in `views/index.jade` for page-specific elements
  - in this exercise, an input form was added, and an image from `public/images/` is displayed
- in `app.js`, an empty file is created in `routes/data.txt` at the app start-up (would be better to have it in a directory of its own)
- actions for GET and POST were modified in `routes/index.js`
  - inputs from the input form are written in `routes/data.txt` and the last input item is passed as a parameter to the page.

## Build and test the container

Docker container can be build with

```
docker build --tag genapp .
```

and it can be tested locally with

```
docker run -d --rm   -p 3000:3000 --name genapp genapp
```

Check in http://localhost:3000/ and stop the container with `docker stop genapp`.

If you do not like my shoe, another image can be passed to the container from a local image `files/shoe.jpg` (I could have named that differently...) with

```
docker run -d --rm -v $PWD/files:/usr/src/app/public/images -p 3000:3000 --name genapp genapp
```
Stop the container with `docker stop genapp` again.
